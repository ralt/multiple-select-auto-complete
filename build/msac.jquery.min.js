(function(e){"use strict";function s(){function s(){var s=e("<div></div>",{"class":"msac-wrapper"});i=e("<input />",{type:"text"}),c=e("<div></div>",{"class":"suggestions"}),o=c.clone(),u=o.clone(),i.appendTo(s),c.appendTo(s),o[0].className="suggestion",u[0].className="selection",u.appendTo(s),s.insertAfter(d)}function n(e){var s=e.data("idx");i[0].value="",l=0,r.splice(s,1),e[0].className="selected",u.append(e),d[0].options[s].selected=!0,c.children().remove()}function t(s){var n=[],t=s.toLowerCase();return t?e.each(r,function(e){var s=this.toLowerCase(),a=s.indexOf(t);~a&&n.push(e)}):l=0,n.length?n:null}var a,i,c,o,u,d=e(this),r=[],l=0;d.hide(),e("option",d).each(function(){r.push(this.text)}),s(),i.on("keyup",function(){var s;c.children().remove(),s=t(this.value),s&&(a=s.length,e.each(s,function(e){var s=o.clone();e===l&&s.addClass("suggested"),s.data("idx",this.valueOf()),s.text(r[this]).appendTo(c)}))}),i.on("keydown",function(s){var t=s.keyCode;switch(t){case 13:n(e(".suggested",c)),l=0;break;case 38:l>0&&l--;break;case 40:a-1>l&&l++}switch(t){case 13:case 38:case 40:return!1}}),c.on("mouseover","div",function(){e(".suggested").removeClass("suggested"),e(this).addClass("suggested")}),c.on("click","div",function(){n(e(this))})}e.fn.msac=function(){return this.each(s)},e.fn.msac.version="0.1.0"})(jQuery);