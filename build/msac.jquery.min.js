(function(e){"use strict";function n(n){function t(){function t(t){return r=t.length,r>n.maxItems?(s("There are more than "+n.maxItems+" suggestions."),void 0):(e.each(t,function(e){var n=p.clone();e===g&&n.addClass("suggested"),n.data("idx",this),n.text(m[this]).appendTo(l)}),void 0)}function s(e){console.log(e)}function o(){var n,t=e(this.parentNode),s=t.data("idx");e(this).remove(),n=t.text(),t.remove(),m[s]=n,f[0].options[s].selected=!1}function i(){var n=e("<div></div>",{"class":"msac-wrapper"});d=e("<input />",{type:"text"}),l=e("<div></div>",{"class":"suggestions"}),p=l.clone(),h=p.clone(),d.appendTo(n),l.appendTo(n),p[0].className="suggestion",h[0].className="selection",h.appendTo(n),n.insertAfter(f),v=e("<span></span>",{"class":"delete",html:"&times;"})}function a(e){var n,t=e.data("idx");d[0].value="",g=0,delete m[t],e[0].className="selected",n=v.clone(),e.append(n),h.append(e),f[0].options[t].selected=!0,l.children().remove()}function c(n){var t=[],s=n.toLowerCase();return s?e.each(m,function(e){if(this){var n=this.toLowerCase(),o=n.indexOf(s);~o&&t.push(e)}}):g=0,t.length?t:null}var r,u,d,l,p,h,v,f=e(this),m=[],g=0;f.hide(),e("option",f).each(function(){m.push(this.text)}),i(),d.on("keyup",function(){var e;l.children().remove(),e=c(this.value),e&&t(e)}),u={13:function(){return a(e(".suggested",l)),g=0,!1},38:function(){return g>0&&g--,!1},40:function(){return r-1>g&&g++,!1}},d.on("keydown",function(e){return u[e.keyCode]?u[e.keyCode]():!0}),l.on("mouseover","div",function(){e(".suggested").removeClass("suggested"),e(this).addClass("suggested")}),l.on("click","div",function(){a(e(this))}),e(".msac-wrapper").on("click",".delete",o)}return n=e.extend({maxItems:20},n),t}e.fn.msac=function(e){var t=new n(e);return this.each(t)},e.fn.msac.version="0.1.0"})(jQuery);