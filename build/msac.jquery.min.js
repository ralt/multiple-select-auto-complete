(function(e){"use strict";function s(){function s(){var s=e("<div></div>",{"class":"msac-wrapper"});a=e("<input />",{type:"text"}),i=e("<div></div>",{"class":"suggestions"}),c=i.clone(),o=c.clone(),a.appendTo(s),i.appendTo(s),c[0].className="suggestion",o[0].className="selection",o.appendTo(s),s.insertAfter(u)}function t(e){var s=e.data("idx");a[0].value="",r=0,d.splice(s,1),e[0].className="selected",o.append(e),u[0].options[s].selected=!0,i.children().remove()}function n(s){var t=[],n=s.toLowerCase();return n?e.each(d,function(e){var s=this.toLowerCase(),a=s.indexOf(n);~a&&t.push(e)}):r=0,t.length?t:null}var a,i,c,o,u=e(this),d=[],r=0;u.hide(),e("option",u).each(function(){d.push(this.text)}),s(),a.on("keyup",function(){var s;i.children().remove(),s=n(this.value),s&&e.each(s,function(e){var s=c.clone();e===r&&s.addClass("suggested"),s.data("idx",this.valueOf()),s.text(d[this]).appendTo(i)})}),a.on("keydown",function(s){var n=s.keyCode;switch(n){case 13:t(e(".suggested",i)),r=0;break;case 38:r--;break;case 40:r++}switch(n){case 13:case 38:case 40:return!1}}),i.on("mouseover","div",function(){e(".suggested").removeClass("suggested"),e(this).addClass("suggested")}),i.on("click","div",function(){t(e(this))})}e.fn.msac=function(){return this.each(s)}})(jQuery);